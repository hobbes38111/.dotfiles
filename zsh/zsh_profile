# -*- mode: sh -*-

# Toggle back and forth between vim and shell with ctrl-z
fancy-ctrl-z () {
  if [[ $#BUFFER -eq 0 ]]; then
    BUFFER="fg"
    zle accept-line
  else
    zle push-input
    zle clear-screen
  fi
}
zle -N fancy-ctrl-z
bindkey '^Z' fancy-ctrl-z

# Nicer less behavior
export LESS=-Ri

# Set EDITOR to vim just for the vit command b/c mvim doesn't play nice
# with it.
vitt () {
    (
        export EDITOR=vim
        vit
    )
}

alias vit=vitt
alias ij="open -b com.jetbrains.intellij"

vman() {
  vim -c "SuperMan $*"

  if [ "$?" != "0" ]; then
    echo "No manual entry for $*"
  fi
}

# emacs shortcut
ec() {
    which osascript > /dev/null 2>&1 && osascript -e 'tell application "Emacs" to activate'
emacsclient -n -q "$@"
}

# Find out which process is using a port, for example 9000
# alia lsof -i :9000
source /usr/local/opt/autoenv/activate.sh
alias ij="open -a /Applications/IntelliJ\ IDEA\ 14.app/ "
emacs() {
    if [[ `uname` == "Darwin" ]]; then
        /usr/local/Cellar/emacs/24.5/Emacs.app/Contents/MacOS/Emacs -nw $1
    else
        emacs -nw $1
    fi
}

# overwriting my old vim alias
alias e="emacsclient -n"

# Simulate a slow connection. Run these on the host machine.
ipfw-throttle() {
    port=$1
    # sudo ipfw pipe 1 config bw 1024Kbyte/s delay 500ms
    sudo ipfw pipe 1 config bw 4096Kbyte/s
    sudo ipfw add 1 pipe 1 src-port $port
}

alias ipfw-restore="sudo ipfw delete 1; sudo ipfw pipe 1 delete"
